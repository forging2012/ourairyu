<!DOCTYPE html><html lang="zh-CN" dir="ltr"><head><base href="/dev/"><meta charset="UTF-8"><title>容器与内部元素外边距重叠 - 网道</title><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="keywords" content="欧雷,欧雷流,宅男的部屋,宅男部屋,宅男,ourai,ourairyu,developer,center,dev,network,front-end,web,网络开发,web开发,开发网络,开发中心"><link rel="author" href="https://plus.google.com/110971881899489153670/"><link rel="shortcut icon" href="images/favicon.ico"><link rel="stylesheet" href="stylesheets/matcha.min.css"><link rel="stylesheet" href="stylesheets/highlight.css"><link rel="stylesheet" href="stylesheets/site.css"><link rel="stylesheet" href="stylesheets/highlight.css"><link rel="stylesheet" href="stylesheets/pages/article.css"> <!--[if lt IE 8]><link rel="stylesheet" href="stylesheets/forbid.css"><![endif]--><!--[if lt IE 9]><script src="javascripts/html5shiv-printshiv.min.js"></script><![endif]--><script src="javascripts/jquery.min.js"></script><script src="javascripts/tatami.min.js"></script><script src="javascripts/matcha.min.js"></script></head><body itemscope itemtype="http://schema.org/WebPage" class="layout--sandwich" data-layout="article" data-page="none"><header class="layout-header"> <nav class="layout-nav layout-inner"><ul><li><a href="/">首页</a></li><li><a href="/projects/">项目</a></li></ul> </nav> </header><main class="layout-container"><div class="layout-content layout-inner"> <article class="article" itemscope itemtype="http://schema.org/Article"> <header class="article-header"><div class="article-title"><h1 itemprop="name">容器与内部元素外边距重叠</h1></div><div class="article-meta"> <time datetime="2011-10-09" itemprop="datePublished">Oct 9, 2011</time> CSS | hasLayout | 外边距 | 重叠</div> </header><div class="article-body" itemprop="articleBody"><p>有时我们在写网页的时候会想让header距离页面顶部有段距离，于是这时就会用到CSS中的“margin-top”这一样式。CSS和HTML代码分别如下：</p><div class="highlight"><pre><code class="language-css" data-lang="css"><span class="nf">#container</span> <span class="p">{</span>
  <span class="k">background-color</span><span class="o">:</span> <span class="nb">gold</span><span class="p">;</span>
<span class="p">}</span>

<span class="nf">#header</span> <span class="p">{</span>
  <span class="k">background-color</span><span class="o">:</span> <span class="nb">silver</span><span class="p">;</span>
  <span class="k">margin-top</span><span class="o">:</span> <span class="m">50px</span><span class="p">;</span>
  <span class="k">text-align</span><span class="o">:</span> <span class="k">center</span><span class="p">;</span>     <span class="c">/* 为了让文字居中 */</span>
<span class="p">}</span></code></pre></div><div class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"container"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"header"</span><span class="nt">&gt;</span>Header<span class="nt">&lt;/div&gt;</span>;
<span class="nt">&lt;/div&gt;</span>;</code></pre></div><p>由于缺乏对W3C标准和CSS规范的认识，使用的时候就会出现明明没对容器设置“margin-top”，但是它随着header一起产生外边距了（容器和子元素都必须是<strong>块级非替换元素</strong>），理想状态下容器的高度应该是内部元素的高度加上内部元素上外边距，而实际情况是容器与内部元素同样大小，如下图：</p><table><thead><tr><th>实际效果</th><th>理想效果</th></tr></thead><tbody><tr><td><a href="http://pic.yupoo.com/ourai_v/BqHGTXMD/6iFwU.png" title="实际效果（点击看大图）"><img src="http://pic.yupoo.com/ourai_v/BqHGTXMD/6iFwU.png" alt="实际效果"/></a></td><td><a href="http://pic.yupoo.com/ourai_v/BqHGUaVf/EmEen.png" title="理想效果（点击看大图）"><img src="http://pic.yupoo.com/ourai_v/BqHGUaVf/EmEen.png" alt="理想效果"/></a></td></tr></tbody></table><p>出现这种情况的原因是：<strong>容器与它的子元素发生了外边距重叠</strong>。要想解决，只需要使容器创建“Block Formatting Context”（IE7以上及非IE的标准浏览器）或者激活hasLayout（IE8以下浏览器）就可以。在容器的CSS中添加如下样式：</p><div class="highlight"><pre><code class="language-css" data-lang="css"><span class="nf">#container</span> <span class="p">{</span>
  <span class="k">overflow</span><span class="o">:</span> <span class="k">auto</span><span class="p">;</span>   <span class="c">/* 创建“Block Formatting Context” */</span>
  <span class="n">zoom</span><span class="o">:</span> <span class="m">1</span><span class="p">;</span>          <span class="c">/* 激活hasLayout */</span>
<span class="p">}</span></code></pre></div></div> <footer class="article-footer"><div class="article-switcher"> <a href="/posts/ie-block-level-element-height-not-zero/" class="prev_article" title="IE6、IE7 及 IE8 怪癖模式下空块级非替换元素高度不为 0">IE6、IE7 及 IE8 怪癖模式下空块级非替换元素高度不为 0</a> <a href="/posts/php-access-data-messy-code/" class="next_article" title="php 读取数据中文乱码解决方案">php 读取数据中文乱码解决方案</a></div><ul class="related_articles"><li><a href="/posts/how-to-improve-web-page-performance/" title="网站性能优化·前端篇">网站性能优化·前端篇</a></li><li><a href="/posts/fetch-url-of-script-file/" title="获取 JavaScript 脚本文件路径">获取 JavaScript 脚本文件路径</a></li><li><a href="/posts/definition-list-with-dl/" title="用 DL 标签实现信息列表">用 DL 标签实现信息列表</a></li><li><a href="/posts/passing-parameters-between-pages-implicitly/" title="页面间隐式传递参数">页面间隐式传递参数</a></li><li><a href="/posts/ie-block-level-element-height-not-zero/" title="IE6、IE7 及 IE8 怪癖模式下空块级非替换元素高度不为 0">IE6、IE7 及 IE8 怪癖模式下空块级非替换元素高度不为 0</a></li><li><a href="/posts/php-access-data-messy-code/" title="php 读取数据中文乱码解决方案">php 读取数据中文乱码解决方案</a></li><li><a href="/posts/horizontal-round-corner-menu/" title="圆角横向菜单实现技巧">圆角横向菜单实现技巧</a></li></ul> </footer> </article><div id="disqus_thread"></div> <script>var disqus_shortname="ouraidev";!function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="//"+disqus_shortname+".disqus.com/embed.js",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript> <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a></div> </main> <footer class="layout-footer"><div class="layout-inner"><div class="footer-links"><div class="internal"> <b>内部通道</b><ul><li><a href="/about/">关于本站</a></li><li><a href="/links/">外部链接</a></li></ul></div><div class="other"> <b>狡兔三窟</b><ul><li><a href="http://ourai.ws/" target="_blank" rel="external nofollow">欧雷流</a></li><li><a href="https://github.com/ourai" target="_blank" rel="external nofollow">GitHub</a></li><li><a href="https://www.codewars.com/users/ourai" target="_blank" rel="external nofollow">Codewars</a></li><li><a href="http://segmentfault.com/u/ourai" target="_blank" rel="external nofollow">SegmentFault</a></li><li><a href="http://weibo.com/ourairyu" target="_blank" rel="external nofollow">微博</a></li></ul></div></div><p class="w3c_techs"><a href="http://validator.w3.org/check?uri=referer" target="_blank" rel="external nofollow"><img src="http://www.w3.org/html/logo/badge/html5-badge-h-css3-semantics.png" width="165" height="64" alt="HTML5 Powered with CSS3 / Styling, and Semantics" title="HTML5 Powered with CSS3 / Styling, and Semantics"></a></p><div class="profile" itemscope itemtype="http://schema.org/Person" lang="en"> <a href="http://lin.ourai.ws/" class="avatar_link" target="_blank" rel="external nofollow"><img class="avatar" src="/images/avatars/mask_2d.jpg?s=120" itemprop="image" alt="欧雷"></a><div class="profile_info"><h3 class="author"><a href="http://lin.ourai.ws/" class="author_link" itemprop="name" target="_blank" rel="external nofollow">Ourai Lin</a></h3><p>Developer / Blogger</p></div></div><p class="copyright">Copyright © 2011-2015 <a href="http://ourai.ws/" target="_blank" rel="external nofollow" title="欧雷流">Ourai.WS</a></p><p class="dependencies">Powered by <a href="https://github.com/" target="_blank" rel="external nofollow" title="GitHub is the best place to share code with friends, co-workers, classmates, and complete strangers. Over four million people use GitHub to build amazing things together.">GitHub</a>, <a href="http://jekyllrb.com/" target="_blank" rel="external nofollow" title="Jekyll is a simple, blog-aware, static site generator. It takes a template directory containing raw text files in various formats, runs it through Markdown (or Textile) and Liquid converters, and spits out a complete, ready-to-publish static website suitable for serving with your favorite web server.">Jekyll</a>, <a href="http://disqus.com/" target="_blank" rel="external nofollow" title="Disqus is a free service that enables great online communities. As the web’s most popular discussion system, Disqus is used by millions of websites that cover pretty much any topic imaginable. Its magic is in connecting people to stuff worth talking about.">Disqus</a></p></div> </footer><script>Tatami.sandbox()</script><!--[if lt IE 8]><div class="forbidden_message"><p>很抱歉，本站不支持低于 Internet Explorer 8 的浏览器。</p><p>如果您想继续用 Internet Explorer 浏览器访问本站，请先<a href="http://windows.microsoft.com/zh-cn/internet-explorer/download-ie" target="_blank">升级</a>。</p></div><![endif]--></body></html>