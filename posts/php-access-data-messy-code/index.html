<!DOCTYPE html><html lang="zh-CN" dir="ltr"><head><base href="/"><meta charset="UTF-8"><title>php 读取数据中文乱码解决方案 - 欧雷的开源项目</title><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="keywords" content="欧雷,欧雷流,ourai,ourairyu,developer,center,dev,network,front-end,web,网络开发,web开发,开发网络,开发中心,开源项目,open source,open,source,项目,project,github,git"><link rel="author" href="https://plus.google.com/110971881899489153670/"><link rel="shortcut icon" href="images/favicon.ico"><link rel="stylesheet" href="stylesheets/matcha.min.css"><link rel="stylesheet" href="stylesheets/highlight.css"><link rel="stylesheet" href="stylesheets/site.css"><link rel="stylesheet" href="stylesheets/highlight.css"><link rel="stylesheet" href="stylesheets/pages/article.css"> <!--[if lt IE 8]><link rel="stylesheet" href="stylesheets/forbid.css"><![endif]--><!--[if lt IE 9]><script src="javascripts/html5shiv-printshiv.min.js"></script><![endif]--><script src="javascripts/jquery.min.js"></script><script src="javascripts/tatami.min.js"></script><script src="javascripts/matcha.min.js"></script></head><body itemscope itemtype="http://schema.org/WebPage" class="layout--sandwich" data-layout="article" data-page="none"><header class="layout-header"> <nav class="layout-nav layout-inner"><ul><li><a href="/">首页</a></li><li><a href="projects/">项目</a></li></ul> </nav> </header><main class="layout-container"><div class="layout-content layout-inner"> <article class="article" itemscope itemtype="http://schema.org/Article"> <header class="article-header"><div class="article-title"><h1 itemprop="name">php 读取数据中文乱码解决方案</h1></div><div class="article-meta"> <time datetime="2011-09-02" itemprop="datePublished">Sep 2, 2011</time> PHP | 乱码 | 存取 | 数据库 | 编码</div> </header><div class="article-body" itemprop="articleBody"><p>最近这些天我每天都在弄博客模板，在今天终于弄得差不多了，于是想转移视线放松一下我这紧张疲劳的大脑——弄个动画的进度记录！</p><p>做这个功能的话，每部动画 N 多集，我看 N 多部动画，所以想要把数据都写在 php 文件里是不可能的，这样就得需要操作数据库。可以这么说，我在数据库这方面就是个小白菜，基本不懂，只知道那么几个基础概念：数据库、表、记录、记录集等以及会一点简单的SQL。</p><p>我认为看多少理论知识也是白搭，还不如动手做，遇到问题就解决，这样倒学得更快！不过没想到刚写了不几行代码就遇到问题了——从数据库中取出来的数据显示到页面上之后是乱码（中文汉字变成了英文问号）！明明数据库和php文件的编码都是 UTF-8 的，想不通为什么！问了几个人，在网上找了半天也没找到确切的解决办法，最后终于还是在「<a href="http://wenwen.soso.com/z/q104200853.htm">搜搜问问——PHP读取MYSQL数据时出现乱码怎么办?</a>」找到了解决方案，下面就结合我的代码记录下来：</p><div class="highlight"><pre><code class="language-php" data-lang="php"><span class="x">// 建立一个连接</span>
<span class="x">  $con = @mysql_connect('127.0.0.1', 'root', '')</span>
<span class="x">  or die('Counld not connect to mysql server!');</span>

<span class="x">  // 设置编码</span>
<span class="x">  mysql_query("SET NAMES utf8");</span>
<span class="x">  mysql_query("SET CHARACTER SET utf8");</span>
<span class="x">  mysql_query("SET COLLATION_CONNECTION='utf8_general_ci'");</span>

<span class="x">  // 获取数据</span>
<span class="x">  if(mysql_select_db('wp_database', $con)) {</span>
<span class="x">    $result = mysql_query('SELECT * FROM wp_users WHERE ID=1');</span>
<span class="x">    $result = mysql_fetch_object($result);</span>
<span class="x">    echo 'The result is: ';</span>
<span class="x">    print_r($result);</span>
<span class="x">  }</span>
<span class="x">  else {</span>
<span class="x">    die(mysql_error());</span>
<span class="x">  }</span></code></pre></div></div> <footer class="article-footer"><div class="article-switcher"> <a href="/posts/container-margin-collapse/" class="prev_article" title="容器与内部元素外边距重叠">容器与内部元素外边距重叠</a> <a href="/posts/horizontal-round-corner-menu/" class="next_article" title="圆角横向菜单实现技巧">圆角横向菜单实现技巧</a></div><ul class="related_articles"><li><a href="/posts/how-to-improve-web-page-performance/" title="网站性能优化·前端篇">网站性能优化·前端篇</a></li><li><a href="/posts/fetch-url-of-script-file/" title="获取 JavaScript 脚本文件路径">获取 JavaScript 脚本文件路径</a></li><li><a href="/posts/definition-list-with-dl/" title="用 DL 标签实现信息列表">用 DL 标签实现信息列表</a></li><li><a href="/posts/passing-parameters-between-pages-implicitly/" title="页面间隐式传递参数">页面间隐式传递参数</a></li><li><a href="/posts/ie-block-level-element-height-not-zero/" title="IE6、IE7 及 IE8 怪癖模式下空块级非替换元素高度不为 0">IE6、IE7 及 IE8 怪癖模式下空块级非替换元素高度不为 0</a></li><li><a href="/posts/container-margin-collapse/" title="容器与内部元素外边距重叠">容器与内部元素外边距重叠</a></li><li><a href="/posts/horizontal-round-corner-menu/" title="圆角横向菜单实现技巧">圆角横向菜单实现技巧</a></li></ul> </footer> </article><div id="disqus_thread"></div> <script>var disqus_shortname="ouraidev";!function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="//"+disqus_shortname+".disqus.com/embed.js",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript> <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a></div> </main> <footer class="layout-footer"><div class="layout-inner"><div class="footer-links"><div class="internal"> <b>内部通道</b><ul><li><a href="about/">关于本站</a></li><li><a href="links/">外部链接</a></li></ul></div><div class="other"> <b>狡兔三窟</b><ul><li><a href="http://ourai.ws/" target="_blank" rel="external nofollow">欧雷流</a></li><li><a href="https://github.com/ourai" target="_blank" rel="external nofollow">GitHub</a></li><li><a href="https://www.codewars.com/users/ourai" target="_blank" rel="external nofollow">Codewars</a></li><li><a href="http://segmentfault.com/u/ourai" target="_blank" rel="external nofollow">SegmentFault</a></li><li><a href="http://weibo.com/ourairyu" target="_blank" rel="external nofollow">微博</a></li></ul></div></div><p class="w3c_techs"><a href="http://validator.w3.org/check?uri=referer" target="_blank" rel="external nofollow"><img src="http://www.w3.org/html/logo/badge/html5-badge-h-css3-semantics.png" width="165" height="64" alt="HTML5 Powered with CSS3 / Styling, and Semantics" title="HTML5 Powered with CSS3 / Styling, and Semantics"></a></p><div class="profile" itemscope itemtype="http://schema.org/Person" lang="en"> <a href="http://ourai.ws/" class="avatar_link" target="_blank" rel="external nofollow"><img class="avatar" src="images/avatars/mask_2d.jpg" itemprop="image" alt="欧雷"></a><div class="profile_info"><h3 class="author"><a href="http://ourai.ws/" class="author_link" itemprop="name" target="_blank" rel="external nofollow">Ourai Lin</a></h3><p>Developer / Blogger</p></div></div><p class="copyright">Copyright © 2011-2015 <a href="http://ourai.ws/" target="_blank" rel="external nofollow" title="欧雷流">Ourai.WS</a></p><p class="dependencies">Powered by <a href="https://github.com/" target="_blank" rel="external nofollow" title="GitHub is the best place to share code with friends, co-workers, classmates, and complete strangers. Over four million people use GitHub to build amazing things together.">GitHub</a>, <a href="http://jekyllrb.com/" target="_blank" rel="external nofollow" title="Jekyll is a simple, blog-aware, static site generator. It takes a template directory containing raw text files in various formats, runs it through Markdown (or Textile) and Liquid converters, and spits out a complete, ready-to-publish static website suitable for serving with your favorite web server.">Jekyll</a>, <a href="http://disqus.com/" target="_blank" rel="external nofollow" title="Disqus is a free service that enables great online communities. As the web’s most popular discussion system, Disqus is used by millions of websites that cover pretty much any topic imaginable. Its magic is in connecting people to stuff worth talking about.">Disqus</a></p></div> </footer><script>Tatami.sandbox()</script><!--[if lt IE 8]><div class="forbidden_message"><p>很抱歉，本站不支持低于 Internet Explorer 8 的浏览器。</p><p>如果您想继续用 Internet Explorer 浏览器访问本站，请先<a href="http://windows.microsoft.com/zh-cn/internet-explorer/download-ie" target="_blank">升级</a>。</p></div><![endif]--></body></html>